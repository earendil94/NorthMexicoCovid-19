library(tidyr)
library(dplyr)
library(caret)
library(imputeTS)
library(recommenderlab)
#Load data and create validation set
blackFriday <- read.csv("../Data/BlackFriday.csv")
# EXPLORATORY ANALYSIS
setwd("~/Units/StatisticalMethodsforDataScience")
confirmed = read.csv("./Exam/confirmed.csv",header=T)
setwd("C:/BashShared/StatisticalMethodsForDataScience/NorthMexicoCovid-19")
confirmed = read.csv("./Exam/confirmed.csv",header=T)
confirmed = read.csv("./confirmed.csv",header=T)
population = read.csv("./population.csv",header=T)
names = c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEÃN",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS")
data <- confirmed[confirmed$Estado%in%names,-1]
# rename cols
colnames(data) <- c("Region","Sex","Age","Date")
data$Date <- as.Date(data$Date,"%d/%m/%Y")
# oder by date
data <- data[order(as.Date(data$Date, format="%d/%m/%Y")),]
rownames(data)=1:dim(data)[1]
levels(data$Region) <- droplevels(data$Region)
levels(data$Region)
for (i in names){
data$population[data$Region==i] <- population[population$Estado==i,2]
}
dim(data)
# hist sex
plot(data$Sex)
#hist age 0-20 20-30 30-40 40-50 50-60 60-70 70-80 80+
data$age_class <- factor(data$Age%/%10)
plot(data$age_class)
#cumulative
data$time <- data$Date-data$Date[1]
plot(data$time,rownames(data),type="l")
# by regions
plot(data$Region)
#cumulative
data$time <- data$Date-data$Date[1]
plot(data$time,rownames(data),type="l")
######################################
####  GLM
data
######################################
####  GLM
View(data)
data_cum <- data %>%
group_by(time) %>%
summarize(daily_cases = n(Region))
library(dplyr)
data_cum <- data %>%
group_by(time) %>%
summarize(daily_cases = n(Region))
data_cum <- data %>%
group_by(time) %>%
summarize(daily_cases = n())
data_cum
plot(data_cum$daily_cases, data_cum)
plot(data_cum$time, data_cum$daily_cases)
updated_data <- read.csv('200718COVID19MEXICO.csv', header=T)
View(updated_data)
municipios <- read.csv('Municipios.txt', sep="\t", header=T)
municipios
View(municipios)
regiones <- read.csv('RegionKey.txt', sep="\t", header = T)
View(regiones)
regiones_norte <- regiones %>%
filter(CLAVE_ENTIDAD %in% c(2,8,10,19,25,26,28,32))
View(regiones_norte)
municipios_norte <- municipios %>%
filter(CLAVE_ENTIDAD %in% c(2,8,10,19,25,26,28,32))
View(municipios_norte)
data_norte <- updated_data %>%
filter(ENTIDAD_RES  %in% c(2,8,10,19,25,26,28,32))
View(data_norte)
data_light <- data_norte %>%
select(FECHA_INGRESO, ENTIDAD_RES)
View(data_light)
data_light <- data_norte %>%
select(FECHA_INGRESO, ENTIDAD_RES, SEXO, EDAD)
View(data_light)
colnames(data_light) <- c("Date", "Region", "Sex", "Age")
View(data)
data_light$Date <- as.Date(data_light$Date,"%d/%m/%Y")
# oder by date
data_light <- data_light[order(as.Date(data_light$Date, format="%d/%m/%Y")),]
levels(data_light$Region) <- droplevels(data_light$Region)
levels(data_light$Region)
View(data_light)
data_light <- data_norte %>%
select(FECHA_INGRESO, ENTIDAD_RES, SEXO, EDAD)
colnames(data_light) <- c("Date", "Region", "Sex", "Age")
data_light$Date <- as.Date(data_light$Date,"%Y/%m/%d")
data_light <- data_norte %>%
select(FECHA_INGRESO, ENTIDAD_RES, SEXO, EDAD)
data_light$Date <- as.Date(data_light$Date,"%Y-%m-%d")
colnames(data_light) <- c("Date", "Region", "Sex", "Age")
data_light$Date <- as.Date(data_light$Date,"%Y-%m-%d")
# EXPLORATORY ANALYSIS
setwd("~/Units/StatisticalMethodsforDataScience")
confirmed = read.csv("./confirmed.csv",header=T)
population = read.csv("./population.csv",header=T)
names = c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEÃN",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS")
data <- confirmed[confirmed$Estado%in%names,-1]
# rename cols
colnames(data) <- c("Region","Sex","Age","Date")
View(data)
data$Date <- as.Date(data$Date,"%d/%m/%Y")
# oder by date
data_light <- data_light[order(as.Date(data_light$Date)),]
as_unique(updated_data$ID_REGISTRO)
is_unique(updated_data$ID_REGISTRO)
unique(updated_data$ID_REGISTRO)
length(unique(updated_data$ID_REGISTRO))
?factor
factor(x = data_light$Region, levels=c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEÃN",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS"))
data_light_factorised <- factor(x = data_light$Region, levels=c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEÃN",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS"))
View(data_light_factorised)
data_light_factorised <- as.factor(x = data_light$Region, levels=c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEÃN",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS"))
data_light_factorised <- as.factor(x = unique(data_light$Region), levels=c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEÃN",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS"))
data_light_factorised <- factor(x = unique(data_light$Region), levels=c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEÃN",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS"))
View(data_light_factorised)
data_light_factorised <- factor(x = unique(data_light$Region), labels=c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEÃN",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS"))
unique(data_light$Region)
data_norte <- updated_data %>%
filter(ENTIDAD_RES  %in% c(2,5,8,10,19,25,26,28,32))
data_light <- data_norte %>%
select(FECHA_INGRESO, ENTIDAD_RES, SEXO, EDAD)
colnames(data_light) <- c("Date", "Region", "Sex", "Age")
data_light_factorised <- factor(x = unique(data_light$Region), labels=c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEÃN",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS"))
View(data_light_factorised)
data_light_factorised <- factor(x = data_light$Region, labels=c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEON",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS"))
View(data_light_factorised)
data_light$Region <- factor(x = data_light$Region, labels=c("BAJA CALIFORNIA","CHIHUAHUA","COAHUILA","DURANGO","NUEVO LEON",
"SINALOA","SONORA","TAMAULIPAS","ZACATECAS"))
data_light$Sex <- factor(x = data_light$Region, labels=c("FEMININO", "MASCULINO"))
data_light$Sex <- factor(x = data_light$Sex, labels=c("FEMININO", "MASCULINO"))
# order by date
data_light <- data_light[order(as.Date(data_light$Date)),]
rownames(data_light)=1:dim(data_light)[1]
View(data_light)
for (i in names){
data$population[data$Region==i] <- population[population$Estado==i,2]
}
dim(data)
data <- data_light
for (i in names){
data$population[data$Region==i] <- population[population$Estado==i,2]
}
dim(data)
# hist sex
plot(data$Sex)
#hist age 0-20 20-30 30-40 40-50 50-60 60-70 70-80 80+
data$age_class <- factor(data$Age%/%10)
plot(data$age_class)
max(data$Age)
dim(data)
# hist sex
plot(data$Sex)
#hist age 0-20 20-30 30-40 40-50 50-60 60-70 70-80 80+
data$age_class <- factor(data$Age%/%10)
plot(data$age_class)
#cumulative
data$time <- data$Date-data$Date[1]
plot(data$time,rownames(data),type="l")
#cumulative
data$time <- data$Date-data$Date[1]
data$Date <- as.Date(data$Date,"%Y-%m-%d")
View(data_light)
data <- data_light
max(data$Age)
for (i in names){
data$population[data$Region==i] <- population[population$Estado==i,2]
}
dim(data)
# hist sex
plot(data$Sex)
#hist age 0-20 20-30 30-40 40-50 50-60 60-70 70-80 80+
data$age_class <- factor(data$Age%/%10)
plot(data$age_class)
#cumulative
data$time <- data$Date-data$Date[1]
summary(data)
summary(data_light)
str(data_light)
data_light$Date <- as.Date(data_light$Date,"%Y-%m-%d")
data <- data_light
max(data$Age)
for (i in names){
data$population[data$Region==i] <- population[population$Estado==i,2]
}
dim(data)
# hist sex
plot(data$Sex)
#hist age 0-20 20-30 30-40 40-50 50-60 60-70 70-80 80+
data$age_class <- factor(data$Age%/%10)
plot(data$age_class)
str(data_light)
summary(data)
#cumulative
data$time <- data$Date-data$Date[1]
plot(data$time,rownames(data),type="l")
# by regions
plot(data$Region)
data_cum <- data %>%
group_by(time) %>%
summarize(daily_cases = n())
plot(data_cum$time, data_cum$daily_cases)
plot(data_cum$time, data_cum$daily_cases, type = "l")
install.packages("pracma")
library("pracma", lib.loc="~/R/win-library/3.5")
data_cum$avg_cases <- movavg(data_cum$daily_cases, n= 7)
data_cum$avg_cases <- movavg(data_cum$daily_cases, n= 7, type="s")
plot(data_cum$time, data_cum$avg_cases)
#A random 120 year old person appears, gratz mate!
max(data$Age,10)
?max
#A random 120 year old person appears, gratz mate!
max(1:5,data$Age)
#hist age 0-20 20-30 30-40 40-50 50-60 60-70 70-80 80+
summary(data)
#hist age 0-20 20-30 30-40 40-50 50-60 60-70 70-80 80+
data$age_class %<%
group_by(age_class) %>%
summarize(n())
#hist age 0-20 20-30 30-40 40-50 50-60 60-70 70-80 80+
data$age_class %>%
group_by(age_class) %>%
summarize(n())
#hist age 0-20 20-30 30-40 40-50 50-60 60-70 70-80 80+
summary(data$age_class)
#hist age 0-20 20-30 30-40 40-50 50-60 60-70 70-80 80+
data$age_class <- factor(data$Age%/%10)
plot(data$age_class)
#cumulative
data$time <- data$Date-data$Date[1]
plot(data$time,rownames(data),type="l")
# by regions
plot(data$Region)
data_cum <- data %>%
group_by(time) %>%
summarize(daily_cases = n())
plot(data_cum$time, data_cum$daily_cases, type = "l")
data_cum$avg_cases <- movavg(data_cum$daily_cases, n= 7, type="s")
plot(data_cum$time, data_cum$avg_cases)
plot(data_cum$time, data_cum$avg_cases, type = "l")
